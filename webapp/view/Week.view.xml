<mvc:View xmlns:core="sap.ui.core" controllerName="sap.ui.agi.timeRecording.controller.Week"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:dnd="sap.ui.core.dnd">

    <VBox class="sapUiSmallMargin sapThemeBaseBG-black" backgroundDesign="Translucent">
        <Button text="Create" press="onCreateDialog" />
        <ScrollContainer width="90vw">
            <grid:CSSGrid gridTemplateColumns="80px repeat(12,8vw)" gridTemplateRows="50px 100%">
                <VBox class="boxHours"/>
                <VBox class="boxHours">
                    <Text text="0"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="1"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="2"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="3"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="4"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="5"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="6"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="7"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="8"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="9"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="10"/>
                </VBox>
                <VBox class="boxHours">
                    <Text text="11"/>
                </VBox>
                <ScrollContainer height="50vh" vertical="true" horizontal="false" id="idScrollContainer">
                    <layoutData>
                        <grid:GridItemLayoutData gridColumn="1 / 14" />
                    </layoutData>
                    <grid:CSSGrid gridTemplateColumns="100%" gridTemplateRows="repeat(auto-fill)" gridGap="" items="{dates>/}" id="scrollGrid">

                        <grid:CSSGrid gridTemplateRows="repeat(auto-fill,50px)" gridTemplateColumns="80px 0px repeat(48,2vw)">
                            <grid:dragDropConfig>
                                <dnd:DropInfo groupName="tableToWeek" drop="onDropTableToWeek" />
                            </grid:dragDropConfig>
                            <grid:dragDropConfig>
                                <dnd:DropInfo groupName="weekToWeek" drop="onDropWeekToWeek" />
                            </grid:dragDropConfig>
                            <VBox class="weekDay">
                                <Text text="{dates>date}"/>
                                <Text text="{= (${dates>entries[0]>duration} || '0 ') + 'minuten'}"/>
                            </VBox>
                            <HBox>
                                <grid:CSSGrid gridTemplateColumns="repeat(100,1fr)" gridTemplateRows="50px" items="{dates>entries}" width="0px" class="entryGrid">
                                    <grid:dragDropConfig>
                                        <dnd:DragInfo groupName="weekToTable" sourceAggregation="items" />
                                        <dnd:DragInfo groupName="weekToWeek" sourceAggregation="items"/>
                                    </grid:dragDropConfig>
                                    <grid:CSSGrid width="calc({= ${dates>duration} / 7.5}vw - 1px)" class="day2" gridTemplateColumns="1fr auto" gridTemplateRows="50% 50%">
                                        <Text text="{dates>tag}"/>
                                        <core:Icon src="sap-icon://decline" press="onDeleteEntry"/>
                                        <Text text="{dates>duration} minuten" />
                                    </grid:CSSGrid>
                                </grid:CSSGrid>
                            </HBox>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                            <VBox/>
                            <VBox/>
                            <VBox/>
                            <VBox class="day"/>
                        </grid:CSSGrid>
                    </grid:CSSGrid>
                </ScrollContainer>
            </grid:CSSGrid>
        </ScrollContainer>
    </VBox>
    <VBox backgroundDesign="Solid" class="sapUiSmallMargin">
        <Button text="addtimer" press="onAddTimer"></Button>
        <ScrollContainer height="28vh" horizontal="false" vertical="true">
            <Table items="{
                    path : 'timers>/'
                }">

                <columns>
                    <Column width="40%">
                        <Text text="Discription"/>
                    </Column>
                    <Column width="20%">
                        <Text text="Tag"/>
                    </Column>
                    <Column width="10%">
                        <Text text="Duration"/>
                    </Column>
                    <Column width="50px">
                        <Text text="Play"/>
                    </Column>
                    <Column width="50px">
                        <Text text="Save"/>
                    </Column>
                    <Column width="60px">
                        <Text text="Delete"/>
                    </Column>
                </columns>
                <dragDropConfig>
                    <dnd:DragInfo groupName="tableToWeek" sourceAggregation="items" />
                    <dnd:DropInfo groupName="weekToTable" drop="onDropWeekToTable" />
                </dragDropConfig>
                <items>
                    <ColumnListItem>
                        <cells>
                            <FlexBox>
                                <Text text="{timers>discription}" visible="{= ${timers>discription} === null ? false : true}"/>
                                <Input width="100%" value="{timers>discription}" submit="onContinueTimer" visible="{= ${timers>discription} === null ? true : false}" enabled="{= ${timers>discription} === null ? true : false}"/>
                            </FlexBox>
                            <FlexBox >
                                <Text text="{timers>tag}" visible="{= ${timers>tag} === null ? false : true}"/>
                                <ComboBox change="onContinueTimer" items="{user>/eligibleTags}" value="{timers>tag}" visible="{= ${timers>tag} === null ? true : false}" enabled="{= ${timers>tag} === null ? true : false}">
                                    <core:Item key="{user>name}" text="{user>name}" />

                                </ComboBox>
                            </FlexBox>

                            <Text text="{timers>duration} sec" />
                            <FlexBox >
                                <Button icon="sap-icon://media-pause" press="onPauseTimer" enabled="{timers>running}" visible="{timers>running}"/>
                                <Button icon="sap-icon://media-play" press="onContinueTimer" enabled="{= !${timers>running}}" visible="{= !${timers>running}}"/>
                            </FlexBox>
                            <Button icon="sap-icon://upload" press="onSaveTimer" />
                            <Button icon="sap-icon://delete" press="onDeleteTimer" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </ScrollContainer>
    </VBox>
</mvc:View>
